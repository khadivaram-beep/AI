import telebot
import google.generativeai as genai

# ูพฺฉุฑุจูุฏ ุชูฺฉู ุงุฑุชุจุงุท ุจุง ูพูุชูุฑู ุจูู
# ุงู ุชูฺฉู ูพู ุงุฑุชุจุงุท ุจู ฺฉุฏ ูพุงุชูู ู ุณุฑูุฑูุง ุจูู ุงุณุช
BOT_TOKEN = 'ุชูฺฉู_ุจูู_ุดูุง'

# ุชูุธูุงุช ูุฑุจูุท ุจู ููุด ูุตููุน ฺฏูฺฏู (ูุฏู Gemini)
# ุงุณุชูุงุฏู ุงุฒ API Key ุจุฑุง ุงุญุฑุงุฒ ููุช ุฏุฑ ุณุฑูุณโูุง ูพุฑุฏุงุฒุด ุงุจุฑ ฺฏูฺฏู
GOOGLE_API_KEY = "AIzaSyDtTMrU6G8_ZJG5OXrQVCX-RE989YFn9s0"

# ููุฏุงุฑุฏู ุงููู ูุฏู ููุด ูุตููุน
genai.configure(api_key=GOOGLE_API_KEY)
model = genai.GenerativeModel('gemini-1.5-flash')

bot = telebot.TeleBot(BOT_TOKEN)

# ุชุนุฑู ูพุงู ุฎูุดโุขูุฏฺฏู ู ูุนุฑู ุชูุณุนูโุฏููุฏู
def get_start_message():
    return (
        "๐ค ุจู ุจุงุฒู ููุดููุฏ ูุชุตู ุจู ูุฏู Gemini ุฎูุด ุขูุฏุฏ.\n"
        "ุงู ูพุฑูฺู ุจุง ุงุณุชูุงุฏู ุงุฒ ุฒุจุงู ูพุงุชูู ู ูพุฑูุชฺฉูโูุง API ุทุฑุงุญ ุดุฏู ุงุณุช.\n\n"
        "๐จโ๐ป ุทุฑุงุญ ู ุชูุณุนู: ุนูุฑุถุง ุฎุฏูุฑ"
    )

# ูุฏุฑุช ุฏุณุชูุฑุงุช ูุฑูุฏ (ูุงููุฏ /start)
@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.reply_to(message, get_start_message())

# ูุณุชู ุงุตู ูพุฑุฏุงุฒุด ูพุงูโูุง ู ุชุนุงูู ุจุง ููุด ูุตููุน
@bot.message_handler(func=lambda message: True)
def handle_messages(message):
    try:
        # ุงุฑุณุงู ูุชู ุฏุฑุงูุช ุดุฏู ุจู ููุชูุฑ ููุด ูุตููุน ุจุฑุง ุชููุฏ ูพุงุณุฎ
        response = model.generate_content(message.text)
        # ุจุงุฒฺฏุฑุฏุงูุฏู ูพุงุณุฎ ุชููุฏ ุดุฏู ุจู ฺฉุงุฑุจุฑ ุฏุฑ ูุญุท ุจูู
        bot.reply_to(message, response.text)
    except Exception as e:
        # ูุฏุฑุช ุฎุทุงูุง ุงุญุชูุงู ุฏุฑ ุดุจฺฉู ุง ฺฉูุฏ ุฏุณุชุฑุณ
        print(f"Error Log: {e}")
        bot.reply_to(message, "ุฏุฑ ุญุงู ุญุงุถุฑ ุณุณุชู ูุงุฏุฑ ุจู ูพุงุณุฎฺฏู ูุณุช. ูุทูุงู ุงุชุตุงู ุฑุง ุจุฑุฑุณ ฺฉูุฏ.")

# ุงุฌุฑุง ุญููู ุจโูพุงุงู ุจุฑุง ูุนุงู ูฺฏู ุฏุงุดุชู ุฑุจุงุช
print("--- ุณุณุชู ุจุง ููููุช ุฑุงู ุงูุฏุงุฒ ุดุฏ ---")
print("ุทุฑุงุญ ูพุฑูฺู: ุนูุฑุถุง ุฎุฏูุฑ")
bot.polling()
